trigger:
  - main
pool:
  vmImage: 'ubuntu-20.04'

stages:
 - stage: Development
   jobs:
    - job: BuildDeploy 
      displayName: "Build & deploy to development"
      steps:
      - script: |
              docker login -u waasegroup  --password "Waasegroup69!"
        displayName: 'Login to Docker'

      - task: Docker@2
        displayName: Build docker image
        inputs:
          repository: docker.io/waasegroup/api-service
          command: build
          Dockerfile: Dockerfile
          tags: latest

      - task: Docker@2
        displayName: Docker Push
        inputs:
          command: push
          repository: docker.io/waasegroup/api-service
          tags: latest
